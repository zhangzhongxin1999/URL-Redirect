<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Universal Content Proxy with URL Generator</title>
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      max-width: 800px;
      margin: 0 auto;
      padding: 20px;
      background-color: #f5f5f5;
      color: #333;
    }
    .container {
      background: white;
      border-radius: 10px;
      padding: 30px;
      box-shadow: 0 4px 6px rgba(0,0,0,0.1);
    }
    h1 {
      color: #2c6bed;
      text-align: center;
    }
    .usage {
      background: #f0f8ff;
      padding: 15px;
      border-radius: 5px;
      margin: 20px 0;
    }
    .example {
      font-family: monospace;
      background: #f4f4f4;
      padding: 5px 10px;
      border-radius: 3px;
      display: inline-block;
      margin: 5px 0;
      word-break: break-all;
    }
    .instructions {
      margin: 20px 0;
    }
    ol {
      padding-left: 20px;
    }
    li {
      margin: 10px 0;
    }
    .warning {
      background: #fff3cd;
      border: 1px solid #ffeaa7;
      color: #856404;
      padding: 10px;
      border-radius: 5px;
      margin: 15px 0;
    }
    .feature-box {
      background: #e8f4fd;
      padding: 15px;
      border-radius: 5px;
      margin: 15px 0;
    }
    .service-section {
      border: 1px solid #e0e0e0;
      border-radius: 8px;
      padding: 15px;
      margin: 15px 0;
    }
    .url-generator {
      background: #f0f8f0;
      border: 1px solid #c8e6c8;
      border-radius: 8px;
      padding: 20px;
      margin: 20px 0;
    }
    .form-group {
      margin-bottom: 15px;
    }
    label {
      display: block;
      margin-bottom: 5px;
      font-weight: bold;
    }
    input[type="text"], input[type="url"], textarea {
      width: 100%;
      padding: 8px;
      border: 1px solid #ccc;
      border-radius: 4px;
      box-sizing: border-box;
    }
    textarea {
      height: 120px;
      font-family: monospace;
    }
    button {
      background-color: #4CAF50;
      color: white;
      padding: 10px 15px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-size: 16px;
    }
    button:hover {
      background-color: #45a049;
    }
    .result {
      margin-top: 15px;
      padding: 10px;
      background-color: #e8f4fd;
      border-radius: 4px;
      display: none;
    }
    .result.show {
      display: block;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>üîÑ Universal Content Proxy</h1>
    
    <div class="service-section">
      <h2>1. üìÑ Gist Content Proxy</h2>
      <div class="usage">
        <h3>How to Use</h3>
        <p>Use this service to access GitHub Gist raw content that might be restricted in your region:</p>
        <p>Original URL: <code>https://gist.githubusercontent.com/username/gist-id/raw/file-path</code></p>
        <p>Proxied URL: <span class="example">https://your-site.pages.dev/gist/username/gist-id/raw/file-path</span></p>
      </div>
      
      <div class="feature-box">
        <h3>‚ú® Feature: Custom Filename</h3>
        <p>Add a <code>?filename=your-desired-name.ext</code> parameter to specify the download filename:</p>
        <p>Custom filename URL: <span class="example">https://your-site.pages.dev/gist/username/gist-id/raw/file-path?filename=my-custom-name.js</span></p>
      </div>
      
      <div class="examples">
        <h3>Examples</h3>
        <p>If your original URL is:</p>
        <div class="example">https://gist.githubusercontent.com/johndoe/abc123def456/raw/script.js</div>
        <p>The basic proxied URL would be:</p>
        <div class="example">https://your-site.pages.dev/gist/johndoe/abc123def456/raw/script.js</div>
        <p>With custom filename:</p>
        <div class="example">https://your-site.pages.dev/gist/johndoe/abc123def456/raw/script.js?filename=my-awesome-script.js</div>
      </div>
    </div>
    
    <div class="service-section">
      <h2>2. ‚úçÔ∏è Text-to-URL Converter</h2>
      <div class="usage">
        <h3>How to Use</h3>
        <p>Create downloadable text files directly from URL parameters:</p>
        <p>Format: <span class="example">https://your-site.pages.dev/text/filename.ext?content=your-text-content</span></p>
        <p>Or with base64 encoding: <span class="example">https://your-site.pages.dev/text/filename.ext?b64=base64-encoded-content</span></p>
      </div>
      
      <div class="feature-box">
        <h3>üí° Tip: Base64 Encoding</h3>
        <p>For complex text with special characters, use base64 encoding:</p>
        <p>Plain text: <span class="example">https://your-site.pages.dev/text/my-file.txt?content=Hello%20World!</span></p>
        <p>Base64 encoded: <span class="example">https://your-site.pages.dev/text/my-file.txt?b64=SGVsbG8gV29ybGQh</span></p>
      </div>
      
      <div class="examples">
        <h3>Examples</h3>
        <p>Simple text file:</p>
        <div class="example">https://your-site.pages.dev/text/hello.txt?content=Hello%20World</div>
        <p>JavaScript file:</p>
        <div class="example">https://your-site.pages.dev/text/script.js?content=function%20test()%20{%20return%20'Hello';%20}</div>
        <p>JSON file with base64:</p>
        <div class="example">https://your-site.pages.dev/text/data.json?b64=eyAiZGF0YSI6ICJleGFtcGxlIiwgIm51bWJlciI6IDEyMyB9</div>
      </div>
    </div>
    
    <div class="url-generator">
      <h2>üîó URL Generator</h2>
      <p>Generate direct links to download your text content as files:</p>
      
      <div class="form-group">
        <label for="content">Content:</label>
        <textarea id="content" placeholder="Enter your text content here..."></textarea>
      </div>
      
      <div class="form-group">
        <label for="filename">Filename (with extension):</label>
        <input type="text" id="filename" value="config.txt" placeholder="e.g., config.json, script.js">
      </div>
      
      <div class="form-group">
        <label for="siteUrl">Your Site URL:</label>
        <input type="url" id="siteUrl" value="https://your-site.pages.dev" placeholder="e.g., https://your-site.pages.dev">
      </div>
      
      <button onclick="generateUrl()">Generate URL</button>
      
      <div id="result" class="result">
        <p><strong>Generated URLs:</strong></p>
        <p>Regular: <a id="regularUrl" href="#" target="_blank"></a></p>
        <p>Base64: <a id="base64Url" href="#" target="_blank"></a></p>
      </div>
    </div>
    
    <div class="instructions">
      <h2>General Instructions</h2>
      <ol>
        <li>For Gist content: Replace the original domain with your Cloudflare Pages domain</li>
        <li>For text content: Use the <code>/text/</code> endpoint with your desired filename and content</li>
        <li>Add <code>?filename=</code> to customize download names for Gist files</li>
        <li>Use <code>?b64=</code> for complex text with special characters</li>
        <li>Use the URL generator above to easily create text-to-URL links</li>
      </ol>
    </div>
    
    <div class="warning">
      <strong>Note:</strong> This proxy is intended to help access legitimate content. Please respect GitHub's Terms of Service and any applicable laws in your jurisdiction.
    </div>
    
    <div class="features">
      <h2>Features</h2>
      <ul>
        <li>Bypasses regional restrictions on GitHub Gist content</li>
        <li>Creates downloadable files from text content in URLs</li>
        <li>URL generator for easy creation of text-to-URL links</li>
        <li>Maintains original content type headers</li>
        <li>Includes caching for improved performance</li>
        <li>Supports all file types (JavaScript, CSS, JSON, text, etc.)</li>
        <li>Custom filename support via <code>?filename=desired-name.ext</code></li>
        <li>Text-to-URL conversion with plain text or base64 content</li>
        <li>Automatic download with specified filename</li>
      </ul>
    </div>
  </div>
  
  <script>
    async function generateUrl() {
      const content = document.getElementById('content').value;
      const filename = document.getElementById('filename').value;
      const siteUrl = document.getElementById('siteUrl').value;
      
      if (!content) {
        alert('Please enter some content');
        return;
      }
      
      if (!filename) {
        alert('Please enter a filename');
        return;
      }
      
      if (!siteUrl) {
        alert('Please enter your site URL');
        return;
      }
      
      try {
        // Use the API endpoint to generate the URL
        const formData = new FormData();
        formData.append('content', content);
        formData.append('filename', filename);
        formData.append('baseUrl', siteUrl);
        
        const response = await fetch('/api/generate-url', {
          method: 'POST',
          body: formData
        });
        
        const data = await response.json();
        
        if (data.success) {
          // Update the result section
          document.getElementById('regularUrl').href = data.url;
          document.getElementById('regularUrl').textContent = data.url;
          document.getElementById('base64Url').href = data.base64Url;
          document.getElementById('base64Url').textContent = data.base64Url;
          
          document.getElementById('result').classList.add('show');
        } else {
          alert('Error: ' + data.error);
        }
      } catch (error) {
        alert('Error generating URL: ' + error.message);
      }
    }
  </script>
</body>
</html>